!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.campusMap=e():t.campusMap=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),a=o(r),i=n(10),l=o(i),s=n(14),c=o(s),u=n(16),d=o(u),p=n(18),f=o(p),m=n(19),g=o(m);e.default=angular.module("campusMap",[]).component("campusMap",a.default).component("campusMapControls",l.default).directive("filterBuilder",c.default).directive("filterInput",d.default).constant("MAP_DEFAULTS",f.default).run(g.default).name},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),a=o(r);n(8);var i={bindings:{onGotoBldg:"&?",mapData:"<?"},templateUrl:"_map.html",transclude:{controls:"campusMapControls"},controller:a.default};e.default=i},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(3),l=o(i),s=function(){function t(e,n,o,a,i,l,s){r(this,t),this._$timeout=e,this._$scope=n,this._$window=o,this._$mdToast=i,this._$mdPanel=l,this._defaults=s,this.getMap=a.getMap,this.map=null,this.toast=i.simple(),this.toastCanceler=null,this.toastActive=!1,this.categories={}}return a(t,null,[{key:"$inject",get:function(){return["$timeout","$scope","$window","NgMap","$mdToast","$mdPanel","MAP_DEFAULTS"]}}]),a(t,[{key:"$onInit",value:function(){var t=this;this.getMap().then(function(e){t.map=e,google.maps.event.trigger(e,"resize"),e.data.setStyle(function(e){return Object.assign({},t._defaults.geometryStyles,{icon:t._defaults.iconStyles,title:e.getProperty("name")},t.categories[e.getProperty("category")])}),t.listeners={mouseover:function(n){e.data.overrideStyle(n.feature,t._defaults.hoverStyles),t.showToast(n.feature)},mouseout:function(n){e.data.revertStyle(),t.toastCanceler=t.hideToast()},click:function(e){t.showDetail(e.feature,t.isolateMouseEvent(e))}},Object.keys(t.listeners).forEach(function(n){return e.data.addListener(n,t.listeners[n])})})}},{key:"$onChanges",value:function(t){var e=t.mapData;if(!e.isFirstChange()){console.log("map component detected external changes:",e);var n=e.currentValue,o=n.location,r=n.category,a=n.collection;o&&a&&(this.location=o,this.updateMapData({location:o,category:r,collection:a}))}}},{key:"$onDestroy",value:function(){var t=this;this.getMap().then(function(e){Object.keys(t.listeners).forEach(function(n){return e.data.removeListener(n,t.listeners[n])&&console.log("map listener removed!")})}),google.maps.event.clearInstanceListeners(this.map.data)}},{key:"updateMapData",value:function(t){var e=this;return console.log("updating map data...",t),this.clearMapData().then(function(n){t.collection.features.length&&t.category.length&&(n.data.addGeoJson(t.collection),e.fitBounds(n),console.log("map data updated!"))})}},{key:"clearMapData",value:function(){return console.log("clearing map data..."),this.getMap().then(function(t){return t.data.forEach(function(e){t.data.remove(e)}),console.log("map data cleared!"),t})}},{key:"showDetail",value:function(t,e){var n=e.clientX,o=e.clientY,r=void 0,a=this._$mdPanel.newPanelPosition().absolute().center(),i=this._$mdPanel.newPanelAnimation().openFrom({top:o,left:n}).closeTo({top:o,left:n}).withAnimation(this._$mdPanel.animation.SCALE);return this._$mdPanel.open({attachTo:angular.element(document.body),controller:l.default,controllerAs:"ctrl",templateUrl:"detail/_map-detail.html",hasBackdrop:!0,panelClass:"map-detail",locals:{onGotoBldg:this.onGotoBldg(),location:this.location,feature:t},trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!0,onDomRemoved:function(){r.destroy()},animation:i,position:a}).then(function(t){r=t})}},{key:"showToast",value:function(t){var e=this,n=t.getProperty("name");this.toastActive?(this._$timeout.cancel(this.toastCanceler),this._$timeout(function(){e._$mdToast.updateTextContent(n)})):(this.toast.textContent(n).position("bottom left").hideDelay(0),this._$mdToast.show(this.toast),this.toastActive=!0)}},{key:"hideToast",value:function(){var t=this;return this._$timeout(function(){t._$mdToast.hide(t.toast),t.toastActive=!1},3e3)}},{key:"processBounds",value:function(t,e,n){var o=this;t instanceof google.maps.LatLng?e.call(n,t):t instanceof google.maps.Data.Point?e.call(n,t.get()):t.getArray().forEach(function(t){o.processBounds(t,e,n)})}},{key:"fitBounds",value:function(t){var e=this,n=new google.maps.LatLngBounds;t.data.forEach(function(t){e.processBounds(t.getGeometry(),n.extend,n)}),t.fitBounds(n)}},{key:"isolateMouseEvent",value:function(t){for(var e in t)if(t[e]&&t[e]instanceof MouseEvent)return console.log(t[e]),t[e]}}]),t}();e.default=s},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();n(4);var a=function(){function t(e){o(this,t);var n=this.feature.getProperty("linked");"buildings"===n||"true"===n?(this.building=this.feature.getProperty("building"),this.name=this.building.name,this.description=e.trustAsHtml(this.building.desc)):"scenes"===n?(this.scene=this.feature.getProperty("scene"),this.name=this.scene.name):(this.name=this.feature.getProperty("name"),this.description=e.trustAsHtml(this.feature.getProperty("desc"))),this.detailsShowing=!1}return r(t,null,[{key:"$inject",get:function(){return["$sce"]}}]),r(t,[{key:"showDetails",value:function(){this.detailsShowing=!this.detailsShowing}},{key:"gotoBldg",value:function(){var t=this,e=this.location,n=this.building;return this.close().then(function(){t.onGotoBldg({location:e.code,building:n.code})})}},{key:"close",value:function(){return this.mdPanelRef.close()}}]),t}();e.default=a},function(t,e,n){var o=n(5);"string"==typeof o&&(o=[[t.id,o,""]]);n(7)(o,{});o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(6)(),e.push([t.id,".map-detail {\n  /* max-width: 400px; */\n  background-color: rgba(255, 255, 255, 0.75);\n  -webkit-transition: 0.3s;\n  transition: 0.3s; }\n\n.details-text {\n  font-size: 14px;\n  /* max-height: 300px; */\n  line-height: 1.6em;\n  color: rgba(0, 0, 0, 0.54); }\n\n.detail-arrow {\n  margin-left: 3px; }\n  .detail-arrow::after {\n    display: inline-block;\n    width: 6px;\n    height: 6px;\n    content: '';\n    border-bottom: solid 2px;\n    border-right: solid 2px;\n    transform: rotate(45deg);\n    transition: transform 0.3s ease; }\n  .detail-arrow.arrow-up::after {\n    transform: rotate(-135deg); }\n","",{version:3,sources:["/./src/detail/map-detail.scss"],names:[],mappings:"AAAA;EACC,uBAAuB;EACtB,4CAA2C;EAC3C,yBAAwB;EACxB,iBAAgB,EACjB;;AAED;EACC,gBAAe;EACf,wBAAwB;EACxB,mBAAkB;EAClB,2BAAuB,EACvB;;AACD;EACC,iBAAgB,EAchB;EAfD;IAGE,sBAAqB;IACrB,WAAU;IACV,YAAW;IACX,YAAW;IACX,yBAAwB;IACxB,wBAAuB;IACvB,yBAAwB;IACxB,gCAA+B,EAC/B;EAXF;IAaE,2BAA0B,EAC1B",file:"map-detail.scss",sourcesContent:[".map-detail {\n\t/* max-width: 400px; */\n  background-color: rgba(255, 255, 255, 0.75);\n  -webkit-transition: 0.3s;\n  transition: 0.3s;\n}\n\n.details-text {\n\tfont-size: 14px;\n\t/* max-height: 300px; */\n\tline-height: 1.6em;\n\tcolor: rgba(0,0,0,0.54);\n}\n.detail-arrow {\n\tmargin-left: 3px;\n\t&::after {\n\t\tdisplay: inline-block;\n\t\twidth: 6px;\n\t\theight: 6px;\n\t\tcontent: '';\n\t\tborder-bottom: solid 2px;\n\t\tborder-right: solid 2px;\n\t\ttransform: rotate(45deg);\n\t\ttransition: transform 0.3s ease;\n\t}\n\t&.arrow-up::after {\n\t\ttransform: rotate(-135deg);\n\t}\n}"],sourceRoot:"webpack://"}])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(o[a]=!0)}for(r=0;r<e.length;r++){var i=e[r];"number"==typeof i[0]&&o[i[0]]||(n&&!i[2]?i[2]=n:n&&(i[2]="("+i[2]+") and ("+n+")"),t.push(i))}},t}},function(t,e,n){function o(t,e){for(var n=0;n<t.length;n++){var o=t[n],r=f[o.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](o.parts[a]);for(;a<o.parts.length;a++)r.parts.push(c(o.parts[a],e))}else{for(var i=[],a=0;a<o.parts.length;a++)i.push(c(o.parts[a],e));f[o.id]={id:o.id,refs:1,parts:i}}}}function r(t){for(var e=[],n={},o=0;o<t.length;o++){var r=t[o],a=r[0],i=r[1],l=r[2],s=r[3],c={css:i,media:l,sourceMap:s};n[a]?n[a].parts.push(c):e.push(n[a]={id:a,parts:[c]})}return e}function a(t,e){var n=h(),o=A[A.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),A.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function i(t){t.parentNode.removeChild(t);var e=A.indexOf(t);e>=0&&A.splice(e,1)}function l(t){var e=document.createElement("style");return e.type="text/css",a(t,e),e}function s(t){var e=document.createElement("link");return e.rel="stylesheet",a(t,e),e}function c(t,e){var n,o,r;if(e.singleton){var a=v++;n=y||(y=l(e)),o=u.bind(null,n,a,!1),r=u.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(e),o=p.bind(null,n),r=function(){i(n),n.href&&URL.revokeObjectURL(n.href)}):(n=l(e),o=d.bind(null,n),r=function(){i(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else r()}}function u(t,e,n,o){var r=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=b(e,r);else{var a=document.createTextNode(r),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(a,i[e]):t.appendChild(a)}}function d(t,e){var n=e.css,o=e.media;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e){var n=e.css,o=e.sourceMap;o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var r=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}var f={},m=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},g=m(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),h=m(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,v=0,A=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=g()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=r(t);return o(n,e),function(t){for(var a=[],i=0;i<n.length;i++){var l=n[i],s=f[l.id];s.refs--,a.push(s)}if(t){var c=r(t);o(c,e)}for(var i=0;i<a.length;i++){var s=a[i];if(0===s.refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete f[s.id]}}}};var b=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var o=n(9);"string"==typeof o&&(o=[[t.id,o,""]]);n(7)(o,{});o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(6)(),e.push([t.id,"ng-map,\ncampus-map {\n  width: 100%;\n  height: 100%; }\n\ncampus-map {\n  background: linear-gradient(135deg, rgba(0, 119, 202, 0.7) 0%, rgba(199, 21, 102, 0.7) 100%) !important; }\n\nng-map,\nng-map > div,\nng-map > div > div {\n  background-color: transparent !important; }\n","",{version:3,sources:["/./src/map.scss"],names:[],mappings:"AAAA;;EAEE,YAAW;EACX,aAAY,EACb;;AAED;EACC,wGAAgG,EAChG;;AAED;;;EAGE,yCAAwC,EACzC",file:"map.scss",sourcesContent:["ng-map,\ncampus-map {\n  width: 100%;\n  height: 100%;\n}\n\ncampus-map {\n\tbackground: linear-gradient(135deg, rgba(0,119,202,0.7) 0%,rgba(199,21,102,0.7) 100%) !important;\n}\n\nng-map,\nng-map > div,\nng-map > div > div {\n  background-color: transparent !important;\n}"],sourceRoot:"webpack://"}])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),a=o(r);n(12);var i={require:{$ngModel:"ngModel",MapCtrl:"^campusMap"},templateUrl:"controls/_map-controls.html",controller:a.default};e.default=i},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(){function t(e,n){o(this,t),this._FeatureResource=e.feature,this._CollectionResource=e.collection,this._CategoryResource=e.category,this._LocationResource=n.location,this.location="",this.category=[],this.collection=[]}return r(t,null,[{key:"$inject",get:function(){return["$mapApi","$tourApi"]}}]),r(t,[{key:"$onInit",value:function(){var t=this;this.loadLocations().then(function(e){return t.location=e[1]._id,t.loadCategories()}).then(function(e){return e.forEach(function(e){var n=e.icon,o=n.anchor,r=o.left,a=o.top,i=n.size,l=i.width,s=i.height;e.icon.anchor=new google.maps.Point(r,a),e.icon.size=new google.maps.Point(l,s),t.MapCtrl.categories[e._id]=e}),t.category=[].concat(n(e.map(function(t){return t._id}))),t.loadCollections()}).then(function(e){return t.collection=[].concat(n(e.map(function(t){return t._id}))),t.loadFeatures(t.filter)})}},{key:"loadLocations",value:function(){var t=this;return this.locations||this._LocationResource.query().$promise.then(function(e){return t.locations=e,e})}},{key:"loadCategories",value:function(){var t=this;return this.categories||this._CategoryResource.query().$promise.then(function(e){return t.categories=e,e})}},{key:"loadCollections",value:function(){var t=this;return this._CollectionResource.query({filter:{location:this.location,category:{$in:[].concat(n(this.category))}}}).$promise.then(function(e){return t.collections=e,e})}},{key:"loadFeatures",value:function(t){var e=this;return this._FeatureResource.query({filter:t}).$promise.then(function(t){return e.features=t,t}).then(function(t){return e.setMapData({location:e.locations.find(function(t){return t._id===e.location}),category:e.getItemsInListByProp(e.category,e.categories,"_id"),collection:{type:"FeatureCollection",features:t}})})}},{key:"setMapData",value:function(t){var e=t.location,n=t.category,o=t.collection;this.$ngModel.$setViewValue({location:e,category:n,collection:o})}},{key:"getItemsInListByProp",value:function(t,e,o){return e&&[].concat(n(e)).filter(function(e){return[].concat(n(t)).indexOf(e[o])!==-1})}},{key:"removeItemFromList",value:function(t,e){var o=[].concat(n(e)).indexOf(t);console.log(t,e,o),o>-1&&e.splice(o,1)}},{key:"isIndeterminate",value:function(t,e){return this[t]&&this[e]&&0!==this[t].length&&this[t].length!==this[e].length}},{key:"isChecked",value:function(t,e){return this[t]&&this[e]&&this[t].length===this[e].length}},{key:"toggleAll",value:function(t,e){this[t].length===this[e].length?(console.log("deselected all"),this[t]=[]):this[t].length>=0&&(console.log("selected all"),this[t]=[].concat(n(this[e].map(function(t){return t._id||t.id}))))}}]),t}();e.default=a},function(t,e,n){var o=n(13);"string"==typeof o&&(o=[[t.id,o,""]]);n(7)(o,{});o.locals&&(t.exports=o.locals)},function(t,e,n){e=t.exports=n(6)(),e.push([t.id,".map-controls-sidenav {\n  background: rgba(255, 255, 255, 0.8); }\n  .map-controls-sidenav md-content {\n    background: transparent; }\n\n.map-controls-handle {\n  height: 100%;\n  position: absolute;\n  right: 0; }\n  .map-controls-handle .md-button {\n    transition: 0.4s ease;\n    background: rgba(0, 0, 0, 0.15); }\n  .map-controls-handle .map-controls-open .md-button {\n    /* opacity: 0; */\n    transition: 0.4s ease;\n    transform: translateX(70%); }\n    .map-controls-handle .map-controls-open .md-button svg {\n      transition: 0.6s ease;\n      transform: translateX(-80%) rotateY(180deg); }\n\n.map-controls md-input-container {\n  padding: 0;\n  /* max-width: 260px; */\n  margin-left: 0.5rem;\n  margin-right: 0.5rem;\n  margin-bottom: 0; }\n\n.map-controls .md-chips {\n  font-size: 12px; }\n\n.map-controls:hover {\n  background-color: rgba(255, 255, 255, 0.9); }\n\nmd-toolbar:not(.md-menu-toolbar),\n.md-button.md-primary.md-raised {\n  background-color: #0077CA; }\n","",{version:3,sources:["/./src/controls/map-controls.scss"],names:[],mappings:"AAAA;EACC,qCAAiC,EAIjC;EALD;IAGE,wBAAuB,EACvB;;AAGF;EACC,aAAY;EACZ,mBAAkB;EAClB,SAAQ,EAcR;EAjBD;IAKE,sBAAqB;IACrB,gCAA+B,EAC/B;EAPF;IASE,iBAAiB;IACjB,sBAAqB;IACrB,2BAA0B,EAK1B;IAhBF;MAaG,sBAAqB;MACrB,4CAA2C,EAC3C;;AAIH;EAEG,WAAU;EACV,uBAAuB;EACvB,oBAAmB;EACnB,qBAAoB;EACpB,iBAAgB,EACjB;;AAPF;EAUE,gBAAe,EACf;;AAXF;EAcG,2CAA0C,EAC3C;;AAGF;;EAEE,0BAAyB,EAC1B",file:"map-controls.scss",sourcesContent:[".map-controls-sidenav {\n\tbackground: rgba(255,255,255,0.8);\n\tmd-content {\n\t\tbackground: transparent;\n\t}\n}\n\n.map-controls-handle {\n\theight: 100%;\n\tposition: absolute;\n\tright: 0;\n\t.md-button {\n\t\ttransition: 0.4s ease;\n\t\tbackground: rgba(0, 0, 0, 0.15);\n\t}\n\t.map-controls-open .md-button {\n\t\t/* opacity: 0; */\n\t\ttransition: 0.4s ease;\n\t\ttransform: translateX(70%);\n\t\tsvg {\n\t\t\ttransition: 0.6s ease;\n\t\t\ttransform: translateX(-80%) rotateY(180deg);\n\t\t}\n\t}\n}\n\n.map-controls {\n\tmd-input-container {\n\t  padding: 0;\n\t  /* max-width: 260px; */\n\t  margin-left: 0.5rem;\n\t  margin-right: 0.5rem;\n\t  margin-bottom: 0;\n\t}\n\n\t.md-chips {\n\t\tfont-size: 12px;\n\t}\n\n\t&:hover {\n\t  background-color: rgba(255, 255, 255, 0.9);\n\t}\n}\n\nmd-toolbar:not(.md-menu-toolbar),\n.md-button.md-primary.md-raised {\n  background-color: #0077CA;\n}"],sourceRoot:"webpack://"}])},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(){return{restrict:"E",template:'<form novalidate\n\t\t\t\t\t\t\t\tng-submit="$event.preventDefault()"\n\t\t\t\t\t\t\t\tlayout="column"\n\t\t\t\t\t\t\t\tlayout-align="start center"\n\t\t\t\t\t\t\t\tflex="grow"\n\t\t\t\t\t\t\t\tng-transclude>\n\t\t\t\t\t\t\t</form>',require:{$ngModel:"ngModel"},transclude:!0,bindToController:!0,controller:i.default}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),i=o(a);e.default=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(){function t(e,o,r){n(this,t),this._$scope=e,this._$attrs=o,this._$parse=r,this.parts={}}return o(t,null,[{key:"$inject",get:function(){return["$scope","$attrs","$parse"]}}]),o(t,[{key:"$onInit",value:function(){var t=this;this._$scope.$watchCollection(function(){return t.getViewValue()},function(){return t.setViewValue()}),this.$ngModel.$parsers.push(function(e){return t.parseViewValue(e)}),this.$ngModel.$formatters.push(function(e){return t.formatModelValue(e)});var e=this._$parse(this._$attrs.onUpdate);this.$ngModel.$viewChangeListeners.push(function(){return e(t._$scope)})}},{key:"getViewValue",value:function(){var t=this;return Object.keys(this.parts).map(function(e){return t.parts[e].$viewValue})}},{key:"setViewValue",value:function(){var t=this,e=Object.keys(this.parts).map(function(e){return t.parts[e].getFilter()});this.$ngModel.$setViewValue(this.removeNulls(e))}},{key:"formatModelValue",value:function(t){var e=this;if(t){var n=Object.keys(this.parts).map(function(n){return t[e.parts[n].$name]&&{modelName:n,modelValue:t[e.parts[n].$name]}});n.forEach(function(t){var n=e._$parse(t.modelName),o=n.assign;o(e._$scope,t.modelValue)})}}},{key:"parseViewValue",value:function(t){return t.length?1===t.length?t[0]:t.length>1?{$and:t}:void 0:{}}},{key:"removeNulls",value:function(t){return t.filter(function(t){return null!=t})}}]),t}();e.default=r},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return this.$viewValue&&(0,l.default)(this.$viewValue)?this.$viewValue.length?r({},this.$name,{$in:this.$viewValue}):null:this.$viewValue?r({},this.$name,this.$viewValue):null}Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),l=o(i),s=["$parse",function(t){return{restrict:"A",require:{NgModelCtrl:"ngModel",FilterBuilderCtrl:"^filterBuilder"},link:function(e,n,o,r){if(!o.name)throw new Error("A filter control is missing its 'name' attribute!");var i=r.NgModelCtrl,l=r.FilterBuilderCtrl;i.getFilter=a,o.filterInput&&t(o.filterInput).assign(e,function(){return i.getFilter()}),l.parts[o.ngModel]=i}}}];e.default=s},function(t,e){function n(t){return!!t&&"object"==typeof t}function o(t,e){var n=null==t?void 0:t[e];return l(n)?n:void 0}function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=y}function a(t){return i(t)&&m.call(t)==c}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){return null!=t&&(a(t)?g.test(p.call(t)):n(t)&&u.test(t))}var s="[object Array]",c="[object Function]",u=/^\[object .+?Constructor\]$/,d=Object.prototype,p=Function.prototype.toString,f=d.hasOwnProperty,m=d.toString,g=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=o(Array,"isArray"),y=9007199254740991,v=h||function(t){return n(t)&&r(t.length)&&m.call(t)==s};t.exports=v},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={mapType:"ROADMAP",mapStyles:[{stylers:[{visibility:"on"},{saturation:-100},{gamma:.54}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#B0B0B0"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"labels.text",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{gamma:.48}]},{featureType:"transit.station",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{gamma:7.18}]}],iconStyles:{path:"M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,12.5A1.5,1.5 0 0,1 10.5,11A1.5,1.5 0 0,1 12,9.5A1.5,1.5 0 0,1 13.5,11A1.5,1.5 0 0,1 12,12.5M12,7.2C9.9,7.2 8.2,8.9 8.2,11C8.2,14 12,17.5 12,17.5C12,17.5 15.8,14 15.8,11C15.8,8.9 14.1,7.2 12,7.2Z",strokeColor:"#FFFFFF",strokeOpacity:.5,strokeWeight:1,fillColor:"#0077CA",fillOpacity:.8,rotation:0,scale:1.5,anchor:new google.maps.Point(12,12),size:new google.maps.Size(24,24)},geometryStyles:{strokeColor:"#003C71",strokeOpacity:.3,strokeWeight:3,fillColor:"#0077CA",fillOpacity:.5,zIndex:1},hoverStyles:{fillColor:"#C71566",fillOpacity:.7,strokeWeight:5,strokeColor:"#FFFFFF",strokeOpacity:.7}};e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=["$templateCache",function(t){t.put("_map.html",'<ng-map\n  center="43.9443802,-78.8975857"\n  zoom="17"\n  styles="{{ ::$ctrl._defaults.mapStyles }}"\n  map-type-id="{{ ::$ctrl._defaults.mapType }}"\n  disable-default-u-i="true"\n  tilt="45"\n  heading="0"\n  layout\n  layout-fill>\n</ng-map>\n<div ng-transclude="controls" class="map-controls"></div>'),t.put("controls/_map-controls.html",'<div class="map-controls-handle" layout="row" ng-class="{ \'map-controls-open\': $ctrl.mapControlsOpen }">\n\t<md-button ng-click="$ctrl.mapControlsOpen = !$ctrl.mapControlsOpen">\n\t  <svg style="width:32px;height:32px" viewBox="0 0 24 24">\n\t    <path fill="#FFFFFF" d="M20,10V14H11L14.5,17.5L12.08,19.92L4.16,12L12.08,4.08L14.5,6.5L11,10H20Z" />\n\t\t</svg>\n\t</md-button>\n\n\t<md-sidenav\n\t    class="md-sidenav-right map-controls-sidenav"\n\t    md-component-id="uoit-campus-map:right"\n\t    md-disable-backdrop\n\t    md-whiteframe="4"\n\t    md-is-locked-open="$ctrl.mapControlsOpen" \n\t    md-is-open="$ctrl.mapControlsOpen"\n\t    layout="column">\n\t  <md-toolbar class="md-primary" layout>\n\t    <div class="md-toolbar-tools">\n\t\t  \t<h1>Map filtering</h1>\n\t  \t</div>\n\t  </md-toolbar>\n\n\t  <md-content\n\t\t  flex="grow"\n\t\t  layout="column">\n\t\t\t<filter-builder ng-model="$ctrl.filter" on-update="$ctrl.loadFeatures($ctrl.filter)" layout="column" layout-padding flex="grow">\n\t\t\t  <md-input-container>\n\t\t\t    <label>Location</label>\n\t\t\t    <md-select ng-model="$ctrl.location" md-on-open="$ctrl.loadLocations()" filter-input name="location" md-on-close="$ctrl.loadFeatures($ctrl.filter)">\n\t\t\t      <md-option ng-repeat="location in ::$ctrl.locations" ng-value="::location._id" ng-disabled="$ctrl.location === location">\n\t\t\t        {{ ::location.label}}\n\t\t\t      </md-option>\n\t\t\t    </md-select>\n\t\t\t  </md-input-container>\n\n\t\t\t  <md-input-container>\n\t\t\t    <label>Feature category</label>\n\t\t\t    <md-select ng-model="$ctrl.category" md-on-open="$ctrl.loadCategories()" ng-disabled="!$ctrl.location.length" multiple filter-input name="properties.category" md-on-close="$ctrl.loadFeatures($ctrl.filter)">\n\t\t\t      <md-option ng-repeat="category in $ctrl.categories" ng-value="::category._id" ng-disabled="$ctrl.category === category">\n\t\t\t        {{ ::category.name }}\n\t\t\t      </md-option>\n\t\t\t    </md-select>\n\t\t\t  </md-input-container>\n\t\t\t  <div layout-padding>\n\t        <md-checkbox aria-label="Select All"\n\t\t\t\t\t\tng-checked="$ctrl.isChecked(\'category\', \'categories\')"\n\t\t\t\t\t\tmd-indeterminate="$ctrl.isIndeterminate(\'category\', \'categories\')"\n\t\t\t\t\t\tng-click="$ctrl.toggleAll(\'category\', \'categories\')">\n\t\t\t\t\t\tSelect all categories\n\t        </md-checkbox>\n        </div>\n<!-- \t\t\t\t<div>\n\t\t\t    <md-chips>\n\t\t\t      <md-chip ng-repeat="category in $ctrl.getItemsInListByProp($ctrl.category, $ctrl.categories, \'_id\') track by $index">\n\t\t\t      \t{{ category.name }}\n\t\t\t\t\t\t  <button class="md-chip-remove" ng-click="$ctrl.removeItemFromList(category._id, $ctrl.category)">&times;</button>\n\t\t\t      </md-chip>\n\t\t\t\t\t</md-chips>\n\t\t\t\t</div> -->\n\n\t\t\t  <md-input-container>\n\t\t\t    <label>Feature collection</label>\n\t\t\t    <md-select ng-model="$ctrl.collection" md-on-open="$ctrl.loadCollections()" ng-disabled="!$ctrl.category.length" multiple filter-input="filters.collection" name="group" md-on-close="$ctrl.loadFeatures($ctrl.filter)">\n\t\t\t      <md-optgroup ng-repeat="group in $ctrl.getItemsInListByProp($ctrl.category, $ctrl.categories, \'_id\')" label="{{ ::group.name }}">\n\t\t\t        <md-option ng-repeat="collection in $ctrl.collections | filter: { category: group._id }" ng-value="::collection._id" ng-disabled="$ctrl.collection === collection">\n\t\t\t          {{ ::collection.name }}\n\t\t\t        </md-option>\n\t\t\t      </md-optgroup>\n\t\t\t    </md-select>\n\t\t\t  </md-input-container>\n\t\t\t  <div layout-padding>\n\t        <md-checkbox aria-label="Select All"\n\t\t\t\t\t\tng-checked="$ctrl.isChecked(\'collection\', \'collections\')"\n\t\t\t\t\t\tmd-indeterminate="$ctrl.isIndeterminate(\'collection\', \'collections\')"\n\t\t\t\t\t\tng-click="$ctrl.toggleAll(\'collection\', \'collections\')">\n\t\t\t\t\t\tSelect all collections\n\t        </md-checkbox>\n        </div>\n\t\t\t\t<!-- <small><pre>{{ $ctrl.filter | json }}</pre></small> -->\n\t\t\t</filter-builder>\n\t<!--   <div layout="column">\n\n\t    <md-button class="md-primary" ng-click="$ctrl.showAll()">\n\t    \tShow all\n\t      <md-tooltip md-direction="bottom">\n\t        Turn on visibility for all available map features\n\t      </md-tooltip>\n\t    </md-button>\n\t  </div> -->\n\t  </md-content>\n\t</md-sidenav>\n</div>'),t.put("detail/_map-detail.html",'<md-whiteframe\n  class="md-whiteframe-16dp"\n  layout="column">\n  <md-toolbar>\n    <div class="md-toolbar-tools">\n      <h2>\n        <span>{{ ::ctrl.name }}</span>\n      </h2>\n      <span flex></span>\n      <md-button class="md-icon-button" aria-label="Close info" ng-click="ctrl.close()">\n        <span>&times;</span>\n      </md-button>\n    </div>\n  </md-toolbar>\n  <div\n  \tlayout="column"\n  \tlayout-margin\n  \tlayout-align="center center">\n    <md-button ng-click="ctrl.showDetails()">{{ ctrl.detailsShowing ? \'Hide\' : \'Show\'}} details <span class="detail-arrow" ng-class="{ \'arrow-up\' : ctrl.detailsShowing }"></span></md-button>\n  \t<md-content layout-padding layout-margin class="details-text" ng-bind-html="::ctrl.description" ng-show="ctrl.detailsShowing"></md-content>\n  \t<md-button layout-padding class="md-raised md-primary" aria-label="Tour this building" ng-if="::ctrl.building" ng-click="ctrl.gotoBldg()">\n  \t\tTake a tour &raquo;\n  \t</md-button>\n  </div>\n</md-whiteframe>')}];e.default=n}])});
//# sourceMappingURL=uoit-campus-map.min.js.map

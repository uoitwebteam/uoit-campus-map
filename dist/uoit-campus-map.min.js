!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.campusMap=e():t.campusMap=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return t[o].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),i=(o(a),n(3)),l=(o(i),n(4)),r=o(l),c=n(5),s=o(c),u=n(6),d=o(u),f=n(9),p=o(f),m=n(10),g=o(m),h=n(11),y=o(h),v=n(12),b=o(v);e.default=angular.module("campusMap",[]).run(b.default).component("campusMap",r.default).component("campusMapControls",s.default).directive("filterBuilder",d.default).directive("filterInput",p.default).constant("MAP_SETTINGS",g.default).constant("MAP_ICONS",y.default)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=n(2),r=o(l),c=function(){function t(e,n,o,i,l,r,c,s){a(this,t),this._$timeout=e,this._$scope=n,this._$window=o,this._$mdToast=l,this._$mdPanel=r,this._MAP_SETTINGS=c,this._MAP_ICONS=s,this.getMap=i.getMap,this.map=null,this.toast=l.simple(),this.toastCanceler=null,this.toastActive=!1}return i(t,null,[{key:"$inject",get:function(){return["$timeout","$scope","$window","NgMap","$mdToast","$mdPanel","MAP_SETTINGS","MAP_ICONS"]}}]),i(t,[{key:"$onInit",value:function(){var t=this;this.getMap().then(function(e){t.map=e,google.maps.event.trigger(e,"resize"),e.data.setStyle(function(e){var n=e.getProperty("category");switch(n){case"581a2c57d9ff16e787aa1b20":return{icon:t._MAP_ICONS.SERVICE};case"581a2c5ed9ff16e787aa1b21":return{icon:t._MAP_ICONS.AED};case"581a2c77d9ff16e787aa1b22":return{icon:t._MAP_ICONS.FOOD,fillColor:"#5F259F",fillOpacity:1,strokeWeight:3,strokeColor:"white",strokeOpacity:.3};case"581a2c8ad9ff16e787aa1b24":return{icon:t._MAP_ICONS.PARKING,fillColor:"#53565A",fillOpacity:.5,strokeWeight:3,strokeColor:"white",strokeOpacity:.3};case"581a2c8fd9ff16e787aa1b25":return{icon:t._MAP_ICONS.OUTDOOR,fillColor:"#1a875c",fillOpacity:.5,strokeWeight:3,strokeColor:"white",strokeOpacity:.1};default:return{icon:t._MAP_ICONS.DEFAULT,fillColor:"#0077CA",fillOpacity:1,strokeWeight:3,strokeColor:"#003C71",strokeOpacity:.3}}}),e.data.addListener("mouseover",function(n){e.data.overrideStyle(n.feature,{fillColor:"#C71566",fillOpacity:.7,strokeWeight:5,strokeColor:"white",strokeOpacity:.7}),t.showToast(n.feature)}),e.data.addListener("mouseout",function(n){e.data.revertStyle(),t.toastCanceler=t.hideToast()}),e.data.addListener("click",function(e){t.showDetail(e.feature,t.isolateMouseEvent(e))})})}},{key:"$onChanges",value:function(t){var e=this,n=t.mapData;if(!n.isFirstChange()){var o=n.currentValue,a=o.location,i=o.category,l=o.collection;console.log("map component detected external changes:",{location:a,category:i,collection:l}),this.clearMapData().then(function(){return e.updateMapData({location:a,category:i,collection:l})}),a&&this.location!==a&&(this.location=a)}}},{key:"$onDestroy",value:function(){google.maps.event.clearInstanceListeners(this.map.data)}},{key:"updateMapData",value:function(t){var e=this;return console.log("updating map data...",t),this.clearMapData().then(function(n){t.collection&&t.category.length&&(t.isCollection?angular.forEach(t.collection,function(o,a){e._$scope.$applyAsync(function(){return n.data.loadGeoJson("http://localhost:3000/api/v1/feature-collections/"+o._id,null,function(){a===t.collection.length-1&&e.fitBounds(n)})})}):n.data.addGeoJson(t.collection),console.log("map data updated!"))})}},{key:"clearMapData",value:function(){return console.log("clearing map data..."),this.getMap().then(function(t){return t.data.forEach(function(e){t.data.remove(e)}),console.log("map data cleared!"),t})}},{key:"showDetail",value:function(t,e){var n=e.clientX,o=e.clientY,a=void 0,i=this._$mdPanel.newPanelPosition().absolute().center(),l=this._$mdPanel.newPanelAnimation().openFrom({top:o,left:n}).closeTo({top:o,left:n}).withAnimation(this._$mdPanel.animation.SCALE);return this._$mdPanel.open({attachTo:angular.element(document.body),controller:r.default,controllerAs:"ctrl",templateUrl:"detail/_map-detail.html",hasBackdrop:!0,panelClass:"map-detail",locals:{callback:this.onGotoBldg(),location:this.location,feature:t},trapFocus:!0,zIndex:150,clickOutsideToClose:!0,escapeToClose:!0,focusOnOpen:!0,onDomRemoved:function(){a.destroy()},animation:l,position:i}).then(function(t){a=t})}},{key:"showToast",value:function(t){var e=this,n=t.getProperty("name");this.toastActive?(this._$timeout.cancel(this.toastCanceler),this._$timeout(function(){e._$mdToast.updateTextContent(n)})):(this.toast.textContent(n).position("bottom left").hideDelay(0),this._$mdToast.show(this.toast),this.toastActive=!0)}},{key:"hideToast",value:function(){var t=this;return this._$timeout(function(){t._$mdToast.hide(t.toast),t.toastActive=!1},3e3)}},{key:"processBounds",value:function(t,e,n){var o=this;t instanceof google.maps.LatLng?e.call(n,t):t instanceof google.maps.Data.Point?e.call(n,t.get()):t.getArray().forEach(function(t){o.processBounds(t,e,n)})}},{key:"fitBounds",value:function(){var t=this,e=new google.maps.LatLngBounds;this.map.data.forEach(function(n){t.processBounds(n.getGeometry(),e.extend,e)}),this.map.fitBounds(e)}},{key:"isolateMouseEvent",value:function(t){for(var e in t)if(t[e]&&t[e]instanceof MouseEvent)return console.log(t[e]),t[e]}}]),t}();e.default=c},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),a=function(){function t(e){n(this,t),this.feature.getProperty("linked")?(this.building=this.feature.getProperty("building"),this.name=this.building.name,this.description=e.trustAsHtml(this.building.desc)):(this.name=this.feature.getProperty("name"),this.description=e.trustAsHtml(this.feature.getProperty("desc"))),this.detailsShowing=!1}return o(t,null,[{key:"$inject",get:function(){return["$sce"]}}]),o(t,[{key:"showDetails",value:function(){this.detailsShowing=!this.detailsShowing}},{key:"gotoBldg",value:function(t){var e=this.location,n=this.building;return this.close().then(function(){t({location:e.code,building:n.code})})}},{key:"close",value:function(){return this.mdPanelRef.close()}}]),t}();e.default=a},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=function(){function t(e,n){o(this,t),this.FeatureResource=e.feature,this.CollectionResource=e.collection,this.CategoryResource=e.category,this.LocationResource=n.location,this.location=[],this.category=[],this.collection=[]}return a(t,null,[{key:"$inject",get:function(){return["$mapApi","$tourApi"]}}]),a(t,[{key:"$onInit",value:function(){var t=this;this.loadLocations().then(function(e){t.location=e[1]._id,t.updateLocation()})}},{key:"getFiltered",value:function(t,e){return e&&[].concat(n(e)).filter(function(e){return[].concat(n(t)).indexOf(e._id||e.id)!==-1})}},{key:"removeFromFiltered",value:function(t,e){var o=[].concat(n(e)).indexOf(t);console.log(t,e,o),o>-1&&e.splice(o,1)}},{key:"loadLocations",value:function(){var t=this;return this.LocationResource.query().$promise.then(function(e){return t.locations=e,e})}},{key:"updateLocation",value:function(){var t=this;this.loadCategories().then(function(e){t.category=[].concat(n(e.map(function(t){return t._id}))),t.updateCategory()})}},{key:"loadCategories",value:function(){var t=this;return this.CategoryResource.query().$promise.then(function(e){return t.categories=e,e})}},{key:"updateCategory",value:function(){var t=this;this.loadFeatures().then(function(){return t.updateFeatures()}).then(function(){return t.loadCollections()}).then(function(e){t.collection=[].concat(n(e.map(function(t){return t._id})))})}},{key:"loadFeatures",value:function(){var t=this;return this.FeatureResource.query({filter:{"properties.category":{$in:[].concat(n(this.category))}}}).$promise.then(function(e){return t.features=e,console.log("FEATURES:",e),e})}},{key:"updateFeatures",value:function(){var t=this.location,e=this.category,n=this.features;this.setMapData({location:t,category:e,collection:{type:"FeatureCollection",features:n}})}},{key:"loadCollections",value:function(){var t=this;return this.CollectionResource.query({filter:{location:this.location,category:{$in:[].concat(n(this.category))}}}).$promise.then(function(e){return t.collections=e,e})}},{key:"updateCollection",value:function(){var t=this.location,e=this.category,n=this.collection;this.setMapData({location:t,category:e,collection:n},!0)}},{key:"setMapData",value:function(t){var e=t.location,n=t.category,o=t.collection,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$ngModel.$setViewValue({location:e,category:n,collection:o,isCollection:a})}},{key:"isIndeterminate",value:function(t,e){return this[t]&&this[e]&&0!==this[t].length&&this[t].length!==e.length}},{key:"isChecked",value:function(t,e){return this[t]&&this[e]&&this[t].length===this[e].length}},{key:"toggleAll",value:function(t,e){this[t].length===this[e].length?(console.log("deselected all"),this[t]=[]):this[t].length>=0&&(console.log("selected all"),this[t]=[].concat(n(this[e])));var o=this.location,a=this.category,i=this.collection;this.setMapData({location:o,category:a,collection:i},!0)}}]),t}();e.default=i},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),i=o(a),l={bindings:{onGotoBldg:"<?",mapData:"<?"},templateUrl:"_map.html",transclude:{controls:"campusMapControls"},controller:i.default};e.default=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(3),i=o(a),l={require:{$ngModel:"ngModel"},templateUrl:"controls/_map-controls.html",controller:i.default};e.default=l},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(){return{restrict:"E",template:'<form novalidate ng-submit="$event.preventDefault()" ng-transclude></form>',require:{$ngModel:"ngModel"},transclude:!0,bindToController:!0,controller:l.default}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),l=o(i);e.default=a},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=n(8),c=o(r),s=function(){function t(e,n){i(this,t),this.$scope=e,this.$parse=n,this.parts={}}return l(t,null,[{key:"$inject",get:function(){return["$scope","$parse"]}}]),l(t,[{key:"$onInit",value:function(){var t=this,e=function(t){return t.filter(function(t){return null==t})},n=function(){return Object.keys(t.parts).map(function(e){return t.parts[e].$viewValue})},o=function(){var n=Object.keys(t.parts).map(function(e){var n=t.parts[e],o=n.$name,i=n.$viewValue;return i&&(0,c.default)(i)?i.length?a({},o,{$in:i}):null:i?a({},o,i):null});t.$ngModel.$setViewValue(e(n))};this.$scope.$watchCollection(n,o);var i=function(t){return console.log("builder parser (view » model)",t),t.length?1===t.length?t[0]:t.length>1?{$and:t}:void 0:{}};this.$ngModel.$parsers.push(i);var l=function(e){if(e){var n=Object.keys(t.parts).map(function(n){return e[t.parts[n].$name]&&{modelName:n,modelValue:e[t.parts[n].$name]}});n.forEach(function(e){var n=t.$parse(e.modelName),o=n.assign;o(t.$scope,e.modelValue)}),console.log("formatter set input to",n)}};this.$ngModel.$formatters.push(l)}}]),t}();e.default=s},function(t,e){function n(t){return!!t&&"object"==typeof t}function o(t,e){var n=null==t?void 0:t[e];return r(n)?n:void 0}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=y}function i(t){return l(t)&&m.call(t)==s}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function r(t){return null!=t&&(i(t)?g.test(f.call(t)):n(t)&&u.test(t))}var c="[object Array]",s="[object Function]",u=/^\[object .+?Constructor\]$/,d=Object.prototype,f=Function.prototype.toString,p=d.hasOwnProperty,m=d.toString,g=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=o(Array,"isArray"),y=9007199254740991,v=h||function(t){return n(t)&&a(t.length)&&m.call(t)==c};t.exports=v},function(t,e){"use strict";function n(){return{restrict:"A",require:{NgModelCtrl:"ngModel",FilterBuilderCtrl:"^filterBuilder"},link:function(t,e,n,o){if(!n.name)throw new Error("A filter control is missing its 'name' attribute!");var a=o.NgModelCtrl,i=o.FilterBuilderCtrl;i.parts[n.ngModel]=a}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={type:"ROADMAP",styles:[{stylers:[{visibility:"on"},{saturation:-100},{gamma:.54}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#B0B0B0"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"labels.text",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{gamma:.48}]},{featureType:"transit.station",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{gamma:7.18}]}]};e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={AED:{path:"M7.5,4A5.5,5.5 0 0,0 2,9.5C2,10 2.09,10.5 2.22,11H6.3L7.57,7.63C7.87,6.83 9.05,6.75 9.43,7.63L11.5,13L12.09,11.58C12.22,11.25 12.57,11 13,11H21.78C21.91,10.5 22,10 22,9.5A5.5,5.5 0 0,0 16.5,4C14.64,4 13,4.93 12,6.34C11,4.93 9.36,4 7.5,4V4M3,12.5A1,1 0 0,0 2,13.5A1,1 0 0,0 3,14.5H5.44L11,20C12,20.9 12,20.9 13,20L18.56,14.5H21A1,1 0 0,0 22,13.5A1,1 0 0,0 21,12.5H13.4L12.47,14.8C12.07,15.81 10.92,15.67 10.55,14.83L8.5,9.5L7.54,11.83C7.39,12.21 7.05,12.5 6.6,12.5H3Z",fillColor:"#c71566",fillOpacity:1,strokeOpacity:.5,strokeWeight:2,strokeColor:"white",anchor:new google.maps.Point(12,12),size:new google.maps.Size(24,24)},ACCESS:{path:"M21,9H15V22H13V16H11V22H9V9H3V7H21M12,2A2,2 0 0,1 14,4A2,2 0 0,1 12,6C10.89,6 10,5.1 10,4C10,2.89 10.89,2 12,2Z",fillColor:"#0077CA",fillOpacity:1,strokeOpacity:.5,strokeWeight:2,strokeColor:"white",anchor:new google.maps.Point(12,12),size:new google.maps.Size(24,24)},FOOD:{path:"M3,3A1,1 0 0,0 2,4V8L2,9.5C2,11.19 3.03,12.63 4.5,13.22V19.5A1.5,1.5 0 0,0 6,21A1.5,1.5 0 0,0 7.5,19.5V13.22C8.97,12.63 10,11.19 10,9.5V8L10,4A1,1 0 0,0 9,3A1,1 0 0,0 8,4V8A0.5,0.5 0 0,1 7.5,8.5A0.5,0.5 0 0,1 7,8V4A1,1 0 0,0 6,3A1,1 0 0,0 5,4V8A0.5,0.5 0 0,1 4.5,8.5A0.5,0.5 0 0,1 4,8V4A1,1 0 0,0 3,3M19.88,3C19.75,3 19.62,3.09 19.5,3.16L16,5.25V9H12V11H13L14,21H20L21,11H22V9H18V6.34L20.5,4.84C21,4.56 21.13,4 20.84,3.5C20.63,3.14 20.26,2.95 19.88,3Z",fillColor:"#5F259F",fillOpacity:.8,strokeOpacity:.5,strokeWeight:2,strokeColor:"white",anchor:new google.maps.Point(12,12),size:new google.maps.Size(24,24)},SERVICE:{path:"M18,16H6V15.1C6,13.1 10,12 12,12C14,12 18,13.1 18,15.1M12,5.3C13.5,5.3 14.7,6.5 14.7,8C14.7,9.5 13.5,10.7 12,10.7C10.5,10.7 9.3,9.5 9.3,8C9.3,6.5 10.5,5.3 12,5.3M19,2H5C3.89,2 3,2.89 3,4V18A2,2 0 0,0 5,20H9L12,23L15,20H19A2,2 0 0,0 21,18V4C21,2.89 20.1,2 19,2Z",fillColor:"#003c71",fillOpacity:.8,strokeOpacity:.5,strokeWeight:2,strokeColor:"white",anchor:new google.maps.Point(12,12),size:new google.maps.Size(24,24)},OUTDOOR:{path:"M10,21V18H3L8,13H5L10,8H7L12,3L17,8H14L19,13H16L21,18H14V21H10Z",fillColor:"#1a875c",fillOpacity:.8,strokeOpacity:.5,strokeWeight:2,strokeColor:"white",anchor:new google.maps.Point(12,12),size:new google.maps.Size(24,24)},PARKING:{path:"M13.2,11H10V7H13.2A2,2 0 0,1 15.2,9A2,2 0 0,1 13.2,11M13,3H6V21H10V15H13A6,6 0 0,0 19,9C19,5.68 16.31,3 13,3Z",fillColor:"#1a875c",fillOpacity:.8,strokeOpacity:.5,strokeWeight:2,strokeColor:"white",anchor:new google.maps.Point(12,12),size:new google.maps.Size(24,24)},DEFAULT:{path:"M3.83,3.57A11.8,11.8,0,0,1,12.5,0a11.8,11.8,0,0,1,8.67,3.57,11.8,11.8,0,0,1,3.57,8.67,16.43,16.43,0,0,1-1.27,5.83,36,36,0,0,1-3.08,6.16q-1.81,2.88-3.57,5.38t-3,4L12.5,35l-1.31-1.52q-.82-.94-3-3.78a63.32,63.32,0,0,1-3.74-5.5,40,40,0,0,1-2.92-6A16.62,16.62,0,0,1,.26,12.24,11.8,11.8,0,0,1,3.83,3.57ZM9.42,15.32A4.2,4.2,0,0,0,12.5,16.6a4.35,4.35,0,0,0,4.35-4.35A4.35,4.35,0,0,0,12.5,7.89a4.35,4.35,0,0,0-4.35,4.35A4.2,4.2,0,0,0,9.42,15.32Z",strokeColor:"white",strokeOpacity:.5,strokeWeight:2,fillColor:"#003c71",fillOpacity:.9,rotation:0,scale:1,anchor:new google.maps.Point(12.5,35),size:new google.maps.Size(30,40)}};e.default=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=["$templateCache",function(t){t.put("_map.html",'<ng-map\n  center="43.9443802,-78.8975857"\n  zoom="17"\n  styles="{{ ::$ctrl._MAP_SETTINGS.styles }}"\n  map-type-id="{{ ::$ctrl._MAP_SETTINGS.type }}"\n  disable-default-u-i="true"\n  tilt="45"\n  heading="0"\n  layout\n  layout-fill>\n  <custom-control id="map-controls" position="TOP_LEFT" index="1" ng-transclude="controls">\n\t\t<!-- <campus-map-controls ng-model="$ctrl.mapControls"></campus-map-controls> -->\n  </custom-control>\n</ng-map>'),t.put("controls/_map-controls.html",'<md-whiteframe\n  class="md-whiteframe-16dp map-controls"\n  layout="row"\n  layout-align="space-between center"\n  layout-fill>\n  <filter-builder ng-model="$ctrl.filter"\n  layout="row">\n    <md-input-container flex layout="column">\n      <label>Location</label>\n      <md-select ng-model="$ctrl.location" md-on-open="$ctrl.loadLocations()" filter-input name="location">\n        <md-option ng-repeat="location in ::$ctrl.locations" ng-value="::location._id" ng-disabled="$ctrl.location === location">\n          {{ ::location.label}}\n        </md-option>\n      </md-select>\n    </md-input-container>\n\n    <md-input-container flex layout="column">\n      <label>Feature category</label>\n      <md-select ng-model="$ctrl.category" md-on-open="$ctrl.loadCategories()" ng-disabled="!$ctrl.location" multiple filter-input name="category">\n<!--         <md-select-header layout-padding>\n          <md-checkbox aria-label="Select All"\n                       ng-checked="$ctrl.isChecked(\'category\', \'categories\')"\n                       md-indeterminate="$ctrl.isIndeterminate(\'category\', \'categories\')"\n                       ng-click="$ctrl.toggleAll(\'category\', \'categories\')">\n            <span ng-if="isChecked(\'category\', \'categories\')">Un-</span>Select All\n          </md-checkbox>\n        </md-select-header> -->\n        <md-option ng-repeat="category in $ctrl.categories" ng-value="::category._id" ng-disabled="$ctrl.category === category">\n          {{ ::category.name }}\n        </md-option>\n      </md-select>\n    </md-input-container>\n\n      <md-chips layout="column">\n        <md-chip ng-repeat="category in $ctrl.getFiltered($ctrl.category, $ctrl.categories) track by $index">\n        \t{{ category.name }}\n\t\t\t\t  <button class="md-chip-remove" ng-click="$ctrl.removeFromFiltered(category._id, $ctrl.category)">&times;</button>\n        </md-chip>\n\t\t\t</md-chips>\n\n    <md-input-container flex layout="column">\n      <label>Feature collection</label>\n      <md-select ng-model="$ctrl.collection" md-on-open="$ctrl.loadCollections()" ng-model-options="{trackBy: \'$value._id\'}" ng-disabled="!$ctrl.category" multiple filter-input name="group">\n        <md-optgroup ng-repeat="group in $ctrl.category" label="{{ ::group.name }}">\n\t        <md-option ng-repeat="collection in $ctrl.collections | filter: { category: group._id }" ng-value="::collection._id" ng-disabled="$ctrl.collection === collection">\n\t          {{ ::collection.name }}\n\t        </md-option>\n        </md-optgroup>\n      </md-select>\n    </md-input-container>\n\n  </filter-builder>\n  <div layout="column">\n\n    <md-button class="md-primary" ng-click="$ctrl.showAll()">\n    \tShow all\n      <md-tooltip md-direction="bottom">\n        Turn on visibility for all available map features\n      </md-tooltip>\n    </md-button>\n\t\t<!-- {{ $ctrl.filter | json }} -->\n  </div>\n</md-whiteframe>'),t.put("detail/_map-detail.html",'<md-whiteframe\n  class="md-whiteframe-16dp"\n  layout="column">\n  <md-toolbar>\n    <div class="md-toolbar-tools">\n      <h2>\n        <span>{{ ::ctrl.name }}</span>\n      </h2>\n      <span flex></span>\n      <md-button class="md-icon-button" aria-label="Close info" ng-click="ctrl.close()">\n        <span>&times;</span>\n      </md-button>\n    </div>\n  </md-toolbar>\n  <div\n  \tlayout="column"\n  \tlayout-margin\n  \tlayout-align="center center">\n    <md-button ng-click="ctrl.showDetails()">{{ ctrl.detailsShowing ? \'Hide\' : \'Show\'}} details <span class="detail-arrow" ng-class="{ \'arrow-up\' : ctrl.detailsShowing }"></span></md-button>\n  \t<md-content layout-padding layout-margin class="details-text" ng-bind-html="::ctrl.description" ng-show="ctrl.detailsShowing"></md-content>\n  \t<md-button layout-padding class="md-raised md-primary" aria-label="Tour this building" ng-if="::ctrl.building" ng-click="ctrl.gotoBldg(ctrl.callback)">\n  \t\tTake a tour &raquo;\n  \t</md-button>\n  </div>\n</md-whiteframe>')}];e.default=n}])});
//# sourceMappingURL=uoit-campus-map.min.js.map
